{"type":"lab","chapters":[{"title":"#Objectives","shortTitle":"Lab-04b","contentMd":"#Objectives\n\nclasses · methods · behaviour · overloading · validation · this · encapsulation · access modifiers · accessors · mutators \n"},{"title":"#Adding behaviour (methods) to Spot","shortTitle":"01","contentMd":"#Adding behaviour (methods) to Spot\n\nWe have seen how the fields are used in classes (i.e. xCoord, yCoord, diameter).\nWe now look at the behaviour (methods) in classes.    \n\n**Note:**  The version of Spot below doesn't enforce the encapsulation rules yet.  We will implement these rules in SpotV7.0 (consistent with how we did it in lectures).  We will bring in Encapsulation in Step04 of this lab when we add the accessors and mutators.\n\n\n##Spot V4.0 - display() method\n\nCreate a new Processing sketch in your workspace and call it **Spot_Version4_0**.\n\nCreate a new **Spot** tab and cut and paste the following code into it:\n\n~~~java\nclass Spot{\n  float xCoord, yCoord;\n  float diameter;\n  \n  Spot()\n  {\n  }\n  \n Spot(float xPos, float yPos, float diamtr)\n {\n    xCoord = xPos;\n    yCoord = yPos;\n    diameter = diamtr;\n  }\n  \n}\n~~~              \n\nThen write this new method into the above class:\n\n~~~java\n  void display()\n  {\n    ellipse(xCoord, yCoord, diameter, diameter);\n  }\n~~~\n\nIn the *main* tab, cut and paste the following code into it:\n\n~~~ \nSpot sp;\n\nvoid setup()\n{\n  size (100,100);\n  noStroke();\n  sp = new Spot(33, 50, 30);\n}\n\nvoid draw()\n{\n  background(0);\n  sp.display();\n}\n~~~          \n\nRun your code.  You should get the following output:\n\n![Drawing spot using display method](./img/01.png)\n\nSave your work (don't close the project though).\n\n"},{"title":"#Adding behaviour (methods) to Spot","shortTitle":"02","contentMd":"#Adding behaviour (methods) to Spot\n\nWe will continue looking at the behaviour (methods) in classes.    \n\n**Note:**  The version of Spot below doesn't enforce the encapsulation rules yet.  We will implement these rules in SpotV7.0 (consistent with how we did it in lectures).  We will bring in Encapsulation in Step04 of this lab when we add the accessors and mutators.\n\n\n##Spot V5.0 - colour() method\n\nSave your **Spot_Version4_0** as **Spot_Version5_0**.\n\nAdd the following fields to the Spot class \n\n~~~java\n  int red, green, blue, gray;\n~~~\n\nType in the following colour() method code to the Spot class:\n\n~~~java \nvoid colour(int redVal, int greenVal, int blueVal)\n  {\n    red = redVal;\n    green = greenVal;\n    blue = blueVal;\n    fill (red, green, blue);\n  }\n~~~\n\nand then in the *main* tab, refactor the draw() method to: \n\n~~~java \nvoid draw()\n{\n  background(0);\n  sp.colour(255,10,20);\n  sp.display();\n}\n~~~   \n\nRun the code.  \n\nYour output should now look like:\n\n![Drawing spot with display() and colour() methods](./img/02.png)\n\nSave your work (don't close the project though).\n\n\n##Spot V5.1 - Adding a second (overloaded) colour() method\n\nSave your **Spot_Version5_0** work as **Spot_Version5_1**.\n\nType the following extra method code in your Spot class:\n\n~~~java\n void colour(int grayVal)\n  {\n    gray = grayVal;\n    fill (gray);\n  }\n~~~ \n\nNow we want to call this extra method, so you need to change the draw method in the *main* tab:\n\n~~~java\nvoid draw()\n{\n  background(0);\n  sp.colour(125);\n  sp.display();\n}\n~~~\n\nRun the code.  \n\nYour output should now look like:\n\n![Drawing spot with second colour method](./img/03.png)\n\nCan you explain why the output is different from the previous output. \n\nSave your work (don't close the project though).\n\n\n##Spot V5.2 - Adding another constructor (to introduce a grayscale starting colour)\n\nSave your **Spot_Version5_1** work as **Spot_Version5_2**.\n\nType in the following extra method code in your Spot class:\n\n~~~java\n Spot(float xPos, float yPos, float diamtr, int grayVal)\n   {\n     xCoord = xPos;\n     yCoord = yPos;\n     diameter = diamtr;\n     colour(grayVal);  \n   }\n~~~\n\nThis constructor allows us to define the colour (in grayscale) of the spot when creating the object. \n\nNow we want to call this extra constructor, so you need to change the code in the setup method in the *main* tab:\n\n~~~java\nSpot sp;\n\nvoid setup()\n{\n  size (100,100);\n  noStroke();\n  sp = new Spot(33, 50, 30, 125);\n}\n\nvoid draw()\n{\n  background(0);\n  sp.display();\n}\n~~~\n\nYour output should now look like:\n\n![Drawing spot with second colour method](./img/03.png)\n\nCan you answer why this is producing the same output as the previous version? \n\nSave your work (don't close the project though).\n\n\n##Spot 5.3 - Adding another constructor (to introduce an r,g,b starting colour)\n\nSave your **Spot_Version5_2** work as **Spot_Version5_3**.\n\nType in the following extra method code in your Spot class:\n\n~~~java\n Spot(float xPos, float yPos, float diamtr, int redVal, int greenVal, int blueVal)\n   {\n     xCoord = xPos;\n     yCoord = yPos;\n     diameter = diamtr;\n     colour(redVal, greenVal, blueVal);  \n   }\n~~~\n\nThen refactor your setup method in the *main* tab like so:\n\n~~~java\nvoid setup()\n{\n  size (100,100);\n  noStroke();\n  sp = new Spot(33, 50, 30, 255,150,50);\n}\n~~~\n\nRun the code.  \n\nYou should see the a differently coloured spot. \n\n![Drawing spot using rgb constructor](./img/04.png)\n\nChange the rgb values in the constructor and see how this changes the colour in the spot. \n\nAlso use the colour method in the draw() method to change the colour. Will this work? Is this the best use of the constructor?\n\nNote that now, your Spot class should look like: \n\n~~~java\nclass Spot{\n  float xCoord, yCoord;\n  float diameter;\n  int red, green, blue, gray;\n  \n  Spot()\n  {\n  }\n  \n  Spot(float xPos, float yPos, float diamtr)\n  {\n     xCoord = xPos;\n     yCoord = yPos;\n     diameter = diamtr;\n   }\n  \n   Spot(float xPos, float yPos, float diamtr, int grayVal)\n   {\n     xCoord = xPos;\n     yCoord = yPos;\n     diameter = diamtr;\n     colour(grayVal);\n   }\n\n   Spot(float xPos, float yPos, float diamtr, int redVal, int greenVal, int blueVal)\n   {\n     xCoord = xPos;\n     yCoord = yPos;\n     diameter = diamtr;\n     colour(redVal, greenVal, blueVal);  \n   }\n   \n   void display()\n   {\n     ellipse(xCoord, yCoord, diameter, diameter);\n   } \n  \n   void colour(int redVal, int greenVal, int blueVal)\n   {\n     red = redVal;\n     green = greenVal;\n     blue = blueVal;\n     fill (red, green, blue);\n   }\n\n   void colour(int grayVal)\n   {\n     gray = grayVal;\n     fill (gray);\n   }\n}\n~~~\n\nSave your work (don't close the project though).\n\n"},{"title":"#Spot V6.x","shortTitle":"03","contentMd":"#Spot V6.x\n\nIn this step, we will introduce the *move* method and also start using the *this* keyword.\n\n**Note:**  The version of Spot below doesn't enforce the encapsulation rules yet.  We will implement these rules in SpotV7.0 (consistent with how we did it in lectures).  We will bring in Encapsulation in Step04 of this lab when we add the accessors and mutators.\n\n\n##Spot V6.0 - Adding a move() method\n\nSave your **Spot_Version5_3** work as **Spot_Version6_0**.\n\nType in the following extra method code in your Spot class:\n\n~~~java\n   void move(float xPos, float yPos)\n   {\n     xCoord = xPos;\n     yCoord = yPos;\n   }\n~~~\n\nand then in the *main* tab, refactor the draw() method to: \n\n~~~java\nSpot sp;\n\nvoid setup()\n{\n  size (100,100);\n  noStroke();\n  sp = new Spot(33, 50, 30, 125);\n}\n\nvoid draw()\n{\n  background(0);\n  sp.display();\n  sp.move(mouseX, mouseY);\n}\n~~~\n\nRun the code. \n\nWhat do you see? Do you understand why it looks like this? If you do not understand, ask your lecturer.\n\nSave your work (don't close the project though).\n\n\n##Spot V6.1 - the this keyword\n\nSave your **Spot_Version6_0** work as **Spot_Version6_1**.\n\nRefactor your Spot class to use the *this* keyword:\n\n~~~java\nclass Spot{\n  \n  float xCoord, yCoord;\n  float diameter;\n  int red, green, blue, gray;\n  \n  Spot()\n  {\n  }\n  \n Spot(float xCoord, float yCoord, float diameter)\n {\n    this.xCoord = xCoord;\n    this.yCoord = yCoord;\n    this.diameter = diameter;\n  }\n  \n   Spot(float xCoord, float yCoord, float diameter, int gray)\n   {\n    this.xCoord = xCoord;\n    this.yCoord = yCoord;\n    this.diameter = diameter;\n    colour(gray);\n   }\n\n   Spot(float xCoord, float yCoord, float diameter, int red, int green, int blue)\n   {\n    this.xCoord = xCoord;\n    this.yCoord = yCoord;\n    this.diameter = diameter;\n     colour(red, green, blue);  \n   }\n   \n   void display()\n   {\n     ellipse(xCoord, yCoord, diameter, diameter);\n   } \n  \n  void colour(int red, int green, int blue)\n  {\n    this.red = red;\n    this.green = green;\n    this.blue = blue;\n    fill (this.red, this.green, this.blue);\n  }\n\n  void colour(int gray){\n    this.gray = gray;\n    fill (this.gray);\n  }\n   \n   void move(float xCoord, float yCoord)\n   {\n     this.xCoord = xCoord;\n     this.yCoord = yCoord;\n   }\n}\n~~~\n\nNo other changes are necessary.\n\nRun your code.  It should behave in the same way at V6.0 above.\n\nSave your work (don't close the project though).\n\n"},{"title":"#Setters and Getters","shortTitle":"04","contentMd":"#Setters and Getters\n\nIn this step, we will make the fields in Spot private and then introduce the *setter* and *getter* methods.  This will allow us implement the encapsulation rules in our class.  \n\n\n##Spot V7.0\n\nSave your **Spot_Version6_1** work as **Spot_Version7_0**.\n\nRefactor your Spot class so that the fields have private access and it has the following setter and getter methods:\n\n~~~java\nclass Spot {\n\n  private float xCoord, yCoord;\n  private float diameter;\n  private int red, green, blue, gray;\n\n  //------------------//\n  //   constructors   //\n  //------------------//\n\n  Spot()\n  {\n  }\n\n  Spot(float xCoord, float yCoord, float diameter)\n  {\n    this.xCoord = xCoord;\n    this.yCoord = yCoord;\n    this.diameter = diameter;\n  }\n\n  Spot(float xCoord, float yCoord, float diameter, int gray)\n  {\n    this.xCoord = xCoord;\n    this.yCoord = yCoord;\n    this.diameter = diameter;\n    colour(gray);\n  }\n\n  Spot(float xCoord, float yCoord, float diameter, int red, int green, int blue)\n  {\n    this.xCoord = xCoord;\n    this.yCoord = yCoord;\n    this.diameter = diameter;\n    colour(red, green, blue);\n  }\n\n  //------------------//\n  //     methods      //\n  //------------------//\n\n  void display()\n  {\n    ellipse(xCoord, yCoord, diameter, diameter);\n  } \n\n  void colour(int red, int green, int blue)\n  {\n    this.red = red;\n    this.green = green;\n    this.blue = blue;\n    fill (this.red, this.green, this.blue);\n  }\n\n  void colour(int gray) {\n    this.gray = gray;\n    fill (this.gray);\n  }\n\n  void move(float xCoord, float yCoord)\n  {\n    this.xCoord = xCoord;\n    this.yCoord = yCoord;\n  }\n\n  //------------------//\n  //     getters      //\n  //------------------//\n  public float getDiameter() {\n    return diameter;\n  }\n\n  public float getXCoord() {\n    return xCoord;\n  }\n\n  public float getYCoord() {\n    return yCoord;\n  }\n\n  public int getRed() {\n    return red;\n  }\n\n  public int getGreen() {\n    return green;\n  }\n\n  public int getBlue() {\n    return blue;\n  }\n\n  public int getGray() {\n    return gray;\n  }\n\n  //------------------//\n  //     setters      //\n  //------------------//\n  public void setDiameter(float diameter) {\n    this.diameter = diameter;\n  } \n\n  public void setXCoord(float xCoord) {\n    this.xCoord = xCoord;\n  } \n\n  public void setYCoord(float yCoord) {\n    this.yCoord = yCoord;\n  } \n\n  public void setRed(int red) {\n    this.red = red;\n  } \n\n  public void setGreen(int green) {\n    this.green = green;\n  } \n\n  public void setBlue(int blue) {\n    this.blue = blue;\n  }\n\n  public void setGray(int gray) {\n    this.gray = gray;\n  }\n\n}\n~~~\n\nand then in the *main* tab, refactor the draw() method to: \n\n~~~java\nSpot sp;\n\nvoid setup()\n{\n  size (100,100);\n  noStroke();\n\n  sp = new Spot(33, 50, 30);\n  println(\"After constructor, the value of the diameter is \" + sp.getDiameter());\n\n  // Now change the value of the diameter\n  sp.setDiameter(40);\n  println(\"After setter, the value of the diameter is \" + sp.getDiameter());\n}\n\nvoid draw()\n{\n  background(0);\n  sp.colour(255,0,0);\n  sp.display();\n}\n~~~\n\n\nExamine the Spot code i.e. the getters and setters. Note what each of the methods do, their naming convention and return values etc.\n\nRun this code.  \n\nYour console output should be:\n\n~~~\nAfter constructor, the value of the diameter is 30.0\nAfter setter, the value of the diameter is 40.0\n~~~\n\nHave a look at your code.  Are you happy that you understand how this output was produced? \n\nSave your work (don't close the project though).\n\n\n"},{"title":"#Setters and Getters - validations","shortTitle":"05","contentMd":"#Setters and Getters - validations\n\nIn this step, we will add some validation to our diameter field.\n\n\n##Spot V7.1 - Using validation in **constructors**\n \nSave your **Spot_Version7_0** work as **Spot_Version7_1**.\n\nRefactor the following Spot Constructor so that it validates the diameter field.\n\n~~~java \nSpot(float xCoord, float yCoord, float diameter)\n  {\n    this.xCoord = xCoord;\n    this.yCoord = yCoord;\n    if ((diameter >= 20) && (diameter <= 50)){\n       this.diameter = diameter;\n    }\n    else{\n       this.diameter = 20;\n    } \n  }\n~~~\n\nThis code will only allow values of between (and including) 20 and 50 into the diameter field. If values outside this range are sent in via the parameter, then the value of 20 is assigned to the diameter field (using the else clause).\n\nTo see this validation in action, refactor the setup method in the *main* tab to:\n\n~~~java\nSpot sp;\n\nvoid setup()\n{\n  size (100,100);\n  noStroke();\n  \n  //constructor (float, float, float) test\n  sp = new Spot(33, 50, 30000);\n  println(\"The value of diameter is : \"+ sp.getDiameter());\n\n}\n\nvoid draw()\n{\n  background(0);\n  sp.display();\n  sp.move(mouseX,  mouseY);\n}\n~~~\n\nTry to run the code. You should see the following line in the console screen:\n\n![Value of diameter field](./img/05.png)\n\n\n##Data Integrity\n\nWe have diameter validation in one constructor, but we can see that the diameter is updated in other constructors:\n\n~~~java \n  //------------------//\n  //   constructors   //\n  //------------------//\n\n  Spot()\n  {\n  }\n\n  Spot(float xCoord, float yCoord, float diameter)\n  {\n    this.xCoord = xCoord;\n    this.yCoord = yCoord;\n    if ((diameter >= 20) && (diameter <= 50)) {\n      this.diameter = diameter;\n    } else {\n      this.diameter = 20;\n    }\n  }\n\n  Spot(float xCoord, float yCoord, float diameter, int gray)\n  {\n    this.xCoord = xCoord;\n    this.yCoord = yCoord;\n    this.diameter = diameter;\n    colour(gray);\n  }\n\n  Spot(float xCoord, float yCoord, float diameter, int red, int green, int blue)\n  {\n    this.xCoord = xCoord;\n    this.yCoord = yCoord;\n    this.diameter = diameter;\n    colour(red, green, blue);\n  }\n\n~~~\n\nIt is also updated in the mutator.  \n\n~~~java\n  public void setDiameter(float diameter) {\n    this.diameter = diameter;\n  } \n~~~\n\nWe have compromised our *data integrity*...diameter may or may not be between the right boundaries, depending on which constructor/mutator we call.  We have to fix this!\n\nCopy and paste the constructor diameter validation into all constructors that update diameter:\n\n~~~java\n  Spot(float xCoord, float yCoord, float diameter)\n  {\n    this.xCoord = xCoord;\n    this.yCoord = yCoord;\n    if ((diameter >= 20) && (diameter <= 50)) {\n      this.diameter = diameter;\n    } else {\n      this.diameter = 20;\n    }\n  }\n\n  Spot(float xCoord, float yCoord, float diameter, int gray)\n  {\n    this.xCoord = xCoord;\n    this.yCoord = yCoord;\n    if ((diameter >= 20) && (diameter <= 50)) {\n      this.diameter = diameter;\n    } else {\n      this.diameter = 20;\n    }\n    colour(gray);\n  }\n\n  Spot(float xCoord, float yCoord, float diameter, int red, int green, int blue)\n  {\n    this.xCoord = xCoord;\n    this.yCoord = yCoord;\n    if ((diameter >= 20) && (diameter <= 50)) {\n      this.diameter = diameter;\n    } else {\n      this.diameter = 20;\n    }\n    colour(red, green, blue);\n  }\n~~~\n\nPaste the constructor diameter validation into the diameter mutator and remove the *else* clause:\n\n~~~java\n  public void setDiameter(float diameter) {\n   if ((diameter >= 20) && (diameter <= 50)) {\n      this.diameter = diameter;\n    }\n  } \n~~~\n\nA note on setters:  \n\n- We use setters as the *safe* way to change the values of fields after the object has been created.\n- We typically use the same validation rules that we applied in the constructor...except...there typically is ***no*** else in the if statement. This means that if the parameter is not in the correct range, then the diameter field will remain unchanged. Where feasible, this is the convention we use for this module. \n\n\n##Testing the grayscale constructor and the mutator\n\nTo test your grayscale constructor and the mutator code, refactor your setup method in the *main* tab to:\n\n~~~java\nvoid setup()\n{\n  size (100, 100);\n  noStroke();\n  \n  //grayscale constructor test\n  sp = new Spot(33, 50, 30000, 200);\n  println(\"After grayscale constructor, the value of the diameter is \" + sp.getDiameter());\n  sp.setDiameter(40000);    // changing the value of the diameter\n  println(\"After setter, the value of the diameter is \" + sp.getDiameter());\n\n}\n~~~\n\nRun your code.  The console output should be:\n\n~~~\nAfter grayscale constructor, the value of the diameter is 20.0\nAfter setter, the value of the diameter is 20.0\n~~~\n\n\n##Testing the rgb constructor and the mutator\n\nTo test your rgb constructor and the mutator code, refactor your setup method in the *main* tab to:\n\n~~~java\nvoid setup()\n{\n  size (100, 100);\n  noStroke();\n\n  //rgb constructor test\n  sp = new Spot(33, 50, 30000, 200, 0, 0);\n  println(\"After rgb constructor, the value of the diameter is \" + sp.getDiameter());\n  sp.setDiameter(40000);    // changing the value of the diameter\n  println(\"After setter, the value of the diameter is \" + sp.getDiameter());\n\n}\n~~~\n\nRun your code.  The console output should be:\n\n~~~\nAfter rgb constructor, the value of the diameter is 20.0\nAfter setter, the value of the diameter is 20.0\n~~~\n\nSave your work and close the project.\n\n\n##Repeating code...\n\nYou may have noticed that we have repeated the same validation in many places in the above code.  This is not the best approach at all.  What would happen if we decided to change the diameter boundaries of the Spot from 20:50 to 20:100?  You would have to *remember* to change it in four places.  That's a lot of remembering and this is where bugs sneak in...what if we forgot to change one of the checks?   \n\nA key mantra to remember when coding...use the **DRY** approach...**Don't Repeat Yourself**.  However, we have a bit of work to do before we move down this path.  Later in the module, we will show a different approach to avoid this scenario and adhere to DRY principles.   \n\n"},{"title":"#Exercise","shortTitle":"Exercise","contentMd":"#Exercise\n\n\n##Exercise 1 \n\nUsing [Spot Version 7.1](archives/Spot_Version7_1.zip) as a starting point, save this as **lab04b_exercise_01**.\n\nImplement these validation rules in the relevant constructors and setters:\n\n- xCoord and yCoord values must be in the range 0..100.\n- if an invalid value is supplied at constructor level, give a default of 50.\n- if an invalid value is supplied at setter level, don't default.\n\nFor testing, use the same appraoch we applied to testing the diameter validation.\n\n\n##DRY principle\n\nNow you can really see how we have repeated ourselves throughout our code.  As we become more familiar with Java, we will working on writing utility / helper methods to reduce this repetition!  \n\n\n"},{"title":"#Challenge","shortTitle":"Challenge","contentMd":"#Challenge\n\n##Challenge 1 \n\nUsing your latest working version of the Spot project as a starting point [or our solution to the previous exercise](archives/lab04b_exercise_01.zip), save it as **lab04b_challenge_01**.\n\nIn Spot, write a method called **grow** that takes in one float parameter (growthPixels).  The return type of this method is void.  \n\nIn the *main* tab, in the draw method, call the **grow** method, passing out a value as a parameter.\n\nRun your code.  If you passed a positive number in grow, you should see your circle growing each time the draw() method is called, if you passed a negative value, you should see your circle shrinking.  To verfiy that the diameter is changing, you could print out the value stored in it (using getDiameter).\n\nData Integrity:  Did you consider data integrity when writing the draw method?  What we mean by this is...else where in the Spot class, we restricted the diameter to a range of 20 to 50 inclusive.  Did you remember to do this in the new method, *grow*?  If not, refactor your method to make sure that the diameter doesn't breach these bounds.  \n\n\n"},{"title":"#Solutions","shortTitle":"Solutions","contentMd":"#Solutions\n\nThe solutions for this lab can be found [here](archives/lab04b_solutions.zip). \n\nIf you require unzipping software, 7zip is a good choice: <http://www.7-zip.org/> (or Keka for Mac <http://www.kekaosx.com/en/>)\n\nAfter unzipping the solutions, it might be a good idea to copy the folders to your **sketchbook** folder.  From Processing, you could then use **File**, followed by **Sketchbook** to easily open them.\n"}]}